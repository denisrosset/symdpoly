<html><head><title>SymDPoly: Details: free algebra</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Denis Rosset" /><meta name="description" content="Symmetry-adapted moment relaxations for noncommutative polynomial optimization" /><meta name="og:image" content="/symdpoly/img/poster.png" /><meta name="og:title" content="SymDPoly: Details: free algebra" /><meta name="og:site_name" content="SymDPoly" /><meta name="og:url" content="http://denisrosset.github.io/symdpoly" /><meta name="og:type" content="website" /><meta name="og:description" content="Symmetry-adapted moment relaxations for noncommutative polynomial optimization" /><link rel="icon" type="image/png" href="/symdpoly/img/favicon.png" /><meta name="twitter:title" content="SymDPoly: Details: free algebra" /><meta name="twitter:image" content="http://denisrosset.github.io/symdpolyimg/poster.png" /><meta name="twitter:description" content="Symmetry-adapted moment relaxations for noncommutative polynomial optimization" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/symdpoly/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/symdpoly/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/symdpoly/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/symdpoly/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/symdpoly/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/symdpoly/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/symdpoly/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/symdpoly/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/symdpoly/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/symdpoly/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/symdpoly/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/symdpoly/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/symdpoly/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/symdpoly/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/symdpoly/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/symdpoly/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/symdpoly/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/symdpoly/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/symdpoly/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/symdpoly/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/symdpoly/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/symdpoly/css/style.css" /><link rel="stylesheet" href="/symdpoly/css/palette.css" /><link rel="stylesheet" href="/symdpoly/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/symdpoly/" class="brand"><div class="brand-wrapper"><span>SymDPoly</span></div></a></li> <li><a href="/symdpoly/docs/installation.html" class="">Installation</a></li> <li><a href="/symdpoly/docs/simple-problem.html" class="">Simple example</a></li> <li><a href="/symdpoly/docs/solvers.html" class="">Interfacing solvers</a></li> <li><a href="/symdpoly/docs/problem-data.html" class="">Exporting structured data</a></li> <li><a href="/symdpoly/docs/free-algebra.html" class=" active ">Details: free algebra</a></li> <li><a href="/symdpoly/docs/quotient-algebra.html" class="">Details: quotient algebra</a></li> <li><a href="/symdpoly/docs/symmetries.html" class="">Details: symmetries</a></li> <li><a href="/symdpoly/docs/evaluation.html" class="">Details: evaluation</a></li> <li><a href="/symdpoly/docs/relaxation.html" class="">Details: relaxation</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/denisrosset/symdpoly"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/denisrosset/symdpoly"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('SymDPoly Symmetry-adapted moment relaxations for noncommutative polynomial optimization');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('SymDPoly Symmetry-adapted moment relaxations for noncommutative polynomial optimization');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="denisrosset" data-github-repo="symdpoly"><div class="content-wrapper"><section><h1 id="details-free-algebra">Details: free algebra</h1>

<p>A <a href="https://en.wikipedia.org/wiki/Free_algebra">free algebra</a> is a polynomial ring in noncommutative variables. Variables are standard Scala objects and can bear indices and flags. Those objects must exist in an object inheriting <code class="highlighter-rouge">free.MonoidDef</code>, and themselves inherit <code class="highlighter-rouge">Op</code>.</p>

<p>Free algebras are defined as <a href="https://en.wikipedia.org/wiki/Monoid_ring">monoid rings</a> over a free monoid (with little added mathematical structure, see below); the ring we use is the field of <a href="https://en.wikipedia.org/wiki/Cyclotomic_field">cyclotomic numbers</a>.</p>

<h2 id="definitions">Definitions</h2>

<p>We return to our CHSH example, but removing the syntactic sugar present in the <a href="simple-problem.html">simple example</a>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">net.alasc.symdpoly._</span>
<span class="k">import</span> <span class="nn">defaults._</span>

<span class="k">object</span> <span class="nc">Free</span> <span class="k">extends</span> <span class="n">free</span><span class="o">.</span><span class="nc">MonoidDef</span> <span class="o">{</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">A</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Op</span> <span class="o">{</span>
	<span class="k">def</span> <span class="n">adjoint</span><span class="k">:</span> <span class="kt">Op</span> <span class="o">=</span> <span class="k">this</span>
  <span class="o">}</span>
  <span class="k">object</span> <span class="nc">A</span> <span class="k">extends</span> <span class="nc">OpType</span> <span class="o">{</span>
	<span class="k">val</span> <span class="n">allInstances</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span>
  <span class="o">}</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">B</span><span class="o">(</span><span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Op</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">adjoint</span><span class="k">:</span> <span class="kt">Op</span> <span class="o">=</span> <span class="k">this</span>
  <span class="o">}</span>
  <span class="k">object</span> <span class="nc">B</span> <span class="k">extends</span> <span class="nc">OpType</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">allInstances</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span>
  <span class="o">}</span>
  <span class="k">val</span> <span class="n">operators</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">)</span>
<span class="o">}</span>
<span class="k">import</span> <span class="nn">Free.</span><span class="o">{</span><span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">}</span>
</code></pre></div></div>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)*</span><span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)).</span><span class="n">adjoint</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free.Free</span>,<span class="kt">Free.Free</span><span class="o">]</span> <span class="k">=</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
</code></pre></div></div>
<p>We can also represent non-Hermitian variables:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">object</span> <span class="nc">Free1</span> <span class="k">extends</span> <span class="n">free</span><span class="o">.</span><span class="nc">MonoidDef</span> <span class="o">{</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">X</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">isAdjoint</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Op</span> <span class="o">{</span>
    <span class="k">override</span> <span class="k">def</span> <span class="n">toString</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">isAdjoint</span><span class="o">)</span> <span class="n">s</span><span class="s">"X($i)*"</span> <span class="k">else</span> <span class="n">s</span><span class="s">"X($i)"</span>
    <span class="k">def</span> <span class="n">adjoint</span><span class="k">:</span> <span class="kt">Op</span> <span class="o">=</span> <span class="n">X</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="o">!</span><span class="n">isAdjoint</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="k">object</span> <span class="nc">X</span> <span class="k">extends</span> <span class="nc">OpType</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">allInstances</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="n">X</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="n">adjoint</span><span class="o">,</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="n">adjoint</span><span class="o">,</span> <span class="n">X</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="n">adjoint</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="k">val</span> <span class="n">operators</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="n">X</span><span class="o">)</span>
<span class="o">}</span>
<span class="k">import</span> <span class="nn">Free1.X</span>
</code></pre></div></div>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)*</span><span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)).</span><span class="n">adjoint</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="k">=</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)*</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)*</span>
</code></pre></div></div>

<p>Note that Scalaâ€™s type system prevents us from mixing operators coming from different free monoids:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)*</span><span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">23</span><span class="k">:</span> <span class="kt">error:</span> <span class="kt">overloaded</span> <span class="kt">method</span> <span class="kt">value</span> <span class="kt">*</span> <span class="kt">with</span> <span class="kt">alternatives:</span>
  <span class="o">(</span><span class="kt">rhs:</span> <span class="kt">net.alasc.symdpoly.Phase</span><span class="o">)</span><span class="kt">Free1.PhasedOp</span> <span class="kt">&lt;and&gt;</span>
  <span class="o">(</span><span class="kt">rhs:</span> <span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">])</span><span class="n">net</span><span class="o">.</span><span class="n">alasc</span><span class="o">.</span><span class="n">symdpoly</span><span class="o">.</span><span class="nc">Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="o">&lt;</span><span class="n">and</span><span class="o">&gt;</span>
  <span class="o">(</span><span class="n">rhs</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Poly</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">])</span><span class="n">net</span><span class="o">.</span><span class="n">alasc</span><span class="o">.</span><span class="n">symdpoly</span><span class="o">.</span><span class="nc">Poly</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="o">&lt;</span><span class="n">and</span><span class="o">&gt;</span>
  <span class="o">(</span><span class="n">rhs</span><span class="k">:</span> <span class="kt">cyclo.Cyclo</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">wM</span><span class="k">:</span> <span class="kt">shapeless.Witness.Aux</span><span class="o">[</span><span class="kt">Free1.Free</span><span class="o">])</span><span class="n">net</span><span class="o">.</span><span class="n">alasc</span><span class="o">.</span><span class="n">symdpoly</span><span class="o">.</span><span class="nc">Poly</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="o">&lt;</span><span class="n">and</span><span class="o">&gt;</span>
  <span class="o">(</span><span class="n">rhs</span><span class="k">:</span> <span class="kt">spire.math.Rational</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">wM</span><span class="k">:</span> <span class="kt">shapeless.Witness.Aux</span><span class="o">[</span><span class="kt">Free1.Free</span><span class="o">])</span><span class="n">net</span><span class="o">.</span><span class="n">alasc</span><span class="o">.</span><span class="n">symdpoly</span><span class="o">.</span><span class="nc">Poly</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="o">&lt;</span><span class="n">and</span><span class="o">&gt;</span>
  <span class="o">(</span><span class="n">rhs</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">wM</span><span class="k">:</span> <span class="kt">shapeless.Witness.Aux</span><span class="o">[</span><span class="kt">Free1.Free</span><span class="o">])</span><span class="n">net</span><span class="o">.</span><span class="n">alasc</span><span class="o">.</span><span class="n">symdpoly</span><span class="o">.</span><span class="nc">Poly</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="o">&lt;</span><span class="n">and</span><span class="o">&gt;</span>
  <span class="o">(</span><span class="n">rhs</span><span class="k">:</span> <span class="kt">Free1.Free</span><span class="k">#</span><span class="kt">PhasedOp</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">wM</span><span class="k">:</span> <span class="kt">shapeless.Witness.Aux</span><span class="o">[</span><span class="kt">Free1.Free</span><span class="o">],</span> <span class="k">implicit</span> <span class="n">ev</span><span class="k">:</span> <span class="kt">cats.evidence.Is</span><span class="o">[</span><span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span>,<span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]])</span><span class="n">net</span><span class="o">.</span><span class="n">alasc</span><span class="o">.</span><span class="n">symdpoly</span><span class="o">.</span><span class="nc">Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="o">&lt;</span><span class="n">and</span><span class="o">&gt;</span>
  <span class="o">(</span><span class="n">rhs</span><span class="k">:</span> <span class="kt">Free1.Free</span><span class="k">#</span><span class="kt">Op</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">wM</span><span class="k">:</span> <span class="kt">shapeless.Witness.Aux</span><span class="o">[</span><span class="kt">Free1.Free</span><span class="o">],</span> <span class="k">implicit</span> <span class="n">ev</span><span class="k">:</span> <span class="kt">cats.evidence.Is</span><span class="o">[</span><span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span>,<span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]])</span><span class="n">net</span><span class="o">.</span><span class="n">alasc</span><span class="o">.</span><span class="n">symdpoly</span><span class="o">.</span><span class="nc">Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span>
 <span class="n">cannot</span> <span class="n">be</span> <span class="n">applied</span> <span class="n">to</span> <span class="o">(</span><span class="nc">Free</span><span class="o">.</span><span class="n">A</span><span class="o">)</span>
       <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)*</span><span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
           <span class="o">^</span>
</code></pre></div></div>

<h2 id="syntactic-sugar">Syntactic sugar</h2>

<p>To ease the boilerplate of defining <code class="highlighter-rouge">allInstances</code> and the <code class="highlighter-rouge">adjoint</code> method for Hermitian operators, we can use the following shortcuts.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">object</span> <span class="nc">FreeSimplified</span> <span class="k">extends</span> <span class="n">free</span><span class="o">.</span><span class="nc">MonoidDef</span> <span class="o">{</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">A</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">HermitianOp</span> <span class="c1">// defines an `adjoint` method that is the identity
</span>  <span class="k">object</span> <span class="nc">A</span> <span class="k">extends</span> <span class="nc">HermitianType1</span><span class="o">(</span><span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="o">)</span>  <span class="c1">// enumerates the instances from a given Range, if the operator has a single index
</span>  <span class="k">case</span> <span class="k">class</span> <span class="nc">B</span><span class="o">(</span><span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">HermitianOp</span>
  <span class="k">object</span> <span class="nc">B</span> <span class="k">extends</span> <span class="nc">HermitianType1</span><span class="o">(</span><span class="mi">0</span> <span class="n">to</span> <span class="mi">1</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">operators</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The same holds for non-Hermitian variables.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">object</span> <span class="nc">Free1Simplified</span> <span class="k">extends</span> <span class="n">free</span><span class="o">.</span><span class="nc">MonoidDef</span> <span class="o">{</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">X</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">isAdjoint</span><span class="k">:</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Op</span> <span class="o">{</span>
    <span class="k">override</span> <span class="k">def</span> <span class="n">toString</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">isAdjoint</span><span class="o">)</span> <span class="n">s</span><span class="s">"X($i)*"</span> <span class="k">else</span> <span class="n">s</span><span class="s">"X($i)"</span>
    <span class="k">def</span> <span class="n">adjoint</span><span class="k">:</span> <span class="kt">Op</span> <span class="o">=</span> <span class="n">X</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="o">!</span><span class="n">isAdjoint</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="k">object</span> <span class="nc">X</span> <span class="k">extends</span> <span class="nc">NonHermitianType1</span><span class="o">(</span><span class="mi">0</span> <span class="n">to</span> <span class="mi">2</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">operators</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="n">X</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">Free1Simplified</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">allInstances</span>
<span class="n">res3</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Free1Simplified.Op</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Vector</span><span class="o">(</span><span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)*,</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)*,</span> <span class="n">X</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="n">X</span><span class="o">(</span><span class="mi">2</span><span class="o">)*)</span>
</code></pre></div></div>

<h2 id="additional-structure-compared-to-free-monoids">Additional structure compared to free monoids</h2>

<p>Compared to standard <code class="highlighter-rouge">*</code>-free monoids, we already include the following structure <em>at the level of our free monoids</em>.</p>

<h3 id="our-free-monoids-are--monoids">Our free monoids are <code class="highlighter-rouge">*</code>-monoids</h3>

<p>Our monoids have an involution compatible with multiplication.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)*</span><span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="n">adjoint</span>
<span class="n">x</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="k">=</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)*</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">y</span> <span class="k">=</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)*</span><span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
<span class="n">y</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="k">=</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="o">).</span><span class="n">adjoint</span>
<span class="n">res4</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="k">=</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)*</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)*</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)*</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="o">(</span><span class="n">y</span><span class="o">.</span><span class="n">adjoint</span><span class="o">)*(</span><span class="n">x</span><span class="o">.</span><span class="n">adjoint</span><span class="o">)</span>
<span class="n">res5</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="k">=</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)*</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)*</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)*</span>
</code></pre></div></div>

<h3 id="self-adjoint-elements-are-handled">Self-adjoint elements are handled</h3>

<p>Instead of defining an equivalence rule <code class="highlighter-rouge">X(0) ~ X(0).adjoint</code> at the level of the quotient monoid, we already have an identity between operator variables and their adjoints when the variable is Hermitian.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="n">adjoint</span>
<span class="n">res6</span><span class="k">:</span> <span class="kt">Free.Op</span> <span class="o">=</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
</code></pre></div></div>

<h3 id="our-free-monoids-are-binoids">Our free monoids are binoids</h3>

<p>Binoids are monoids with an absorbing element, which we denote by <em>zero</em> (see the thesis of <a href="https://arxiv.org/pdf/1603.02093.pdf">Simone Boettger</a>). This absorbing element is unique.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">Free1</span><span class="o">.</span><span class="n">zero</span> <span class="o">*</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
<span class="n">res7</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.</span><span class="k">type</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="k">=</span> <span class="mi">0</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">*</span> <span class="nc">Free1</span><span class="o">.</span><span class="n">zero</span>
<span class="n">res8</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="k">=</span> <span class="mi">0</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">Free1</span><span class="o">.</span><span class="n">zero</span> <span class="o">*</span> <span class="nc">Free1</span><span class="o">.</span><span class="n">zero</span>
<span class="n">res9</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.</span><span class="k">type</span>,<span class="kt">Free1.Free</span><span class="o">]</span> <span class="k">=</span> <span class="mi">0</span>
</code></pre></div></div>

<h2 id="polynomials-over-free-monoids">Polynomials over free monoids</h2>

<p>First and foremost, we can have polynomials whose monomials are elements of a free monoid (excluding zero):</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">p</span> <span class="k">=</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">*</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">*</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">*</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="n">p</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Poly</span><span class="o">[</span><span class="kt">Free.Free</span>,<span class="kt">Free.Free</span><span class="o">]</span> <span class="k">=</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div></div>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">*</span> <span class="n">p</span> <span class="o">-</span> <span class="n">p</span>
<span class="n">res10</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Poly</span><span class="o">[</span><span class="kt">Free.Free</span>,<span class="kt">Free.Free</span><span class="o">]</span> <span class="k">=</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div></div>

<p>Due to syntax issues in the Scala programming language, you must multiply by scalars <em>on the right</em>, or either use the left multiplication <code class="highlighter-rouge">*:</code> operator.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">*</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
<span class="n">res11</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Poly</span><span class="o">[</span><span class="kt">Free.Free</span>,<span class="kt">Free.Free</span><span class="o">]</span> <span class="k">=</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">*:</span> <span class="n">p</span>
<span class="n">res12</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Poly</span><span class="o">[</span><span class="kt">Free.Free</span>,<span class="kt">Free.Free</span><span class="o">]</span> <span class="k">=</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div></div>

<p>Due to the same syntax issue, constant terms must be added from the right:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">-</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)*</span><span class="mi">2</span>
<span class="n">res13</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Poly</span><span class="o">[</span><span class="kt">Free.Free</span>,<span class="kt">Free.Free</span><span class="o">]</span> <span class="k">=</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div></div>

<p>or use the cumbersome <code class="highlighter-rouge">Poly.constant</code>:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">Poly</span><span class="o">.</span><span class="n">constant</span><span class="o">[</span><span class="kt">Free.</span><span class="k">type</span>, <span class="kt">Free.</span><span class="k">type</span><span class="o">](</span><span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)*</span><span class="mi">2</span><span class="o">)</span> <span class="o">-</span> <span class="n">p</span>
<span class="n">res14</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Poly</span><span class="o">[</span><span class="kt">Free.</span><span class="k">type</span>,<span class="kt">Free.</span><span class="k">type</span><span class="o">]</span> <span class="k">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div></div>

<p>This will fail:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)*</span><span class="mi">2</span> <span class="o">-</span> <span class="n">p</span>
<span class="o">&lt;</span><span class="n">console</span><span class="k">&gt;:</span><span class="mi">24</span><span class="k">:</span> <span class="kt">error:</span> <span class="kt">overloaded</span> <span class="kt">method</span> <span class="kt">value</span> <span class="kt">-</span> <span class="kt">with</span> <span class="kt">alternatives:</span>
  <span class="o">(</span><span class="kt">rhs:</span> <span class="kt">cyclo.Cyclo</span><span class="o">)</span><span class="kt">cyclo.Cyclo</span> <span class="kt">&lt;and&gt;</span>
  <span class="o">(</span><span class="kt">r:</span> <span class="kt">spire.math.Rational</span><span class="o">)</span><span class="kt">cyclo.Cyclo</span>
 <span class="n">cannot</span> <span class="n">be</span> <span class="n">applied</span> <span class="n">to</span> <span class="o">(</span><span class="n">net</span><span class="o">.</span><span class="n">alasc</span><span class="o">.</span><span class="n">symdpoly</span><span class="o">.</span><span class="nc">Poly</span><span class="o">[</span><span class="kt">Free.Free</span>,<span class="kt">Free.Free</span><span class="o">])</span>
       <span class="n">sqrt</span><span class="o">(</span><span class="mi">2</span><span class="o">)*</span><span class="mi">2</span> <span class="o">-</span> <span class="n">p</span>
                 <span class="o">^</span>
</code></pre></div></div>
<p>as for binary operations, the left term handles the evaluation, and thus it should be the most complex type present.</p>

<h2 id="other-objects-on-free-monoids">Other objects on free monoids</h2>

<p>Likewise 
Other objects include operators with a phase, used to define symmetries:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
<span class="n">res16</span><span class="k">:</span> <span class="o">(</span><span class="kt">Free.A</span><span class="o">,</span> <span class="kt">Free.PhasedOp</span><span class="o">)</span> <span class="k">=</span> <span class="o">(</span><span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">),-</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span>
</code></pre></div></div>
<p>and monomials with a phase, useful to define substitution rules:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">*</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">X</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">*</span> <span class="nc">Phase</span><span class="o">.</span><span class="n">minusI</span>
<span class="n">res17</span><span class="k">:</span> <span class="o">(</span><span class="kt">net.alasc.symdpoly.Mono</span><span class="o">[</span><span class="kt">Free1.Free</span>,<span class="kt">Free1.Free</span><span class="o">],</span> <span class="nc">Free1</span><span class="o">.</span><span class="nc">PhasedOp</span><span class="o">)</span> <span class="k">=</span> <span class="o">(</span><span class="n">X</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">X</span><span class="o">(</span><span class="mi">1</span><span class="o">),-</span><span class="n">i</span> <span class="n">X</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span>
</code></pre></div></div>

<p>When constructing the moment matrix, <em>*SymDPoly</em> processes monomials with a phase.</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/symdpoly/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script>((window.gitter = {}).chat = {}).options = {
room: 'denisrosset/symdpoly'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/symdpoly/js/main.js"></script></body></html>