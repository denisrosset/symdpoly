<html><head><title>SymDPoly: Exporting structured data</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Denis Rosset" /><meta name="description" content="Symmetry-adapted moment relaxations for noncommutative polynomial optimization" /><meta name="og:image" content="/symdpoly/img/poster.png" /><meta name="og:title" content="SymDPoly: Exporting structured data" /><meta name="og:site_name" content="SymDPoly" /><meta name="og:url" content="http://denisrosset.github.io/symdpoly" /><meta name="og:type" content="website" /><meta name="og:description" content="Symmetry-adapted moment relaxations for noncommutative polynomial optimization" /><link rel="icon" type="image/png" href="/symdpoly/img/favicon.png" /><meta name="twitter:title" content="SymDPoly: Exporting structured data" /><meta name="twitter:image" content="http://denisrosset.github.io/symdpolyimg/poster.png" /><meta name="twitter:description" content="Symmetry-adapted moment relaxations for noncommutative polynomial optimization" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/symdpoly/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/symdpoly/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/symdpoly/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/symdpoly/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/symdpoly/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/symdpoly/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/symdpoly/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/symdpoly/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/symdpoly/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/symdpoly/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/symdpoly/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/symdpoly/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/symdpoly/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/symdpoly/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/symdpoly/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/symdpoly/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/symdpoly/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/symdpoly/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/symdpoly/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/symdpoly/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/symdpoly/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/symdpoly/css/style.css" /><link rel="stylesheet" href="/symdpoly/css/palette.css" /><link rel="stylesheet" href="/symdpoly/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/symdpoly/" class="brand"><div class="brand-wrapper"><span>SymDPoly</span></div></a></li> <li><a href="/symdpoly/docs/installation.html" class="">Installation</a></li> <li><a href="/symdpoly/docs/simple-problem.html" class="">Simple example</a></li> <li><a href="/symdpoly/docs/solvers.html" class="">Interfacing solvers</a></li> <li><a href="/symdpoly/docs/problem-data.html" class=" active ">Exporting structured data</a></li> <li><a href="/symdpoly/docs/free-algebra.html" class="">Details: free algebra</a></li> <li><a href="/symdpoly/docs/quotient-algebra.html" class="">Details: quotient algebra</a></li> <li><a href="/symdpoly/docs/symmetries.html" class="">Details: symmetries</a></li> <li><a href="/symdpoly/docs/evaluation.html" class="">Details: evaluation</a></li> <li><a href="/symdpoly/docs/relaxation.html" class="">Details: relaxation</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/denisrosset/symdpoly"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/denisrosset/symdpoly"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('SymDPoly Symmetry-adapted moment relaxations for noncommutative polynomial optimization');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('SymDPoly Symmetry-adapted moment relaxations for noncommutative polynomial optimization');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="denisrosset" data-github-repo="symdpoly"><div class="content-wrapper"><section><h1 id="exporting-structured-data">Exporting structured data</h1>

<p>Again, we work with the CHSH relaxation.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">import</span> <span class="nn">net.alasc.symdpoly.examples.CHSH</span>
<span class="k">import</span> <span class="nn">net.alasc.symdpoly.examples.CHSH</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">relaxation</span> <span class="k">=</span> <span class="nc">CHSH</span><span class="o">.</span><span class="n">relaxation</span>
<span class="n">relaxation</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.Relaxation</span><span class="o">[</span><span class="kt">net.alasc.symdpoly.examples.CHSH.L.</span><span class="k">type</span>,<span class="kt">net.alasc.symdpoly.quotient.MonoidDef.&lt;refinement&gt;.</span><span class="k">type</span>,<span class="kt">net.alasc.symdpoly.examples.CHSH.Quotient.Free</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Relaxation</span><span class="o">(</span><span class="nc">Maximization</span><span class="o">(</span><span class="n">L</span><span class="o">([</span><span class="kt">A</span><span class="o">(</span><span class="err">0</span><span class="o">)</span> <span class="kt">B</span><span class="o">(</span><span class="err">0</span><span class="o">)])</span> <span class="o">+</span> <span class="n">L</span><span class="o">([</span><span class="kt">A</span><span class="o">(</span><span class="err">0</span><span class="o">)</span> <span class="kt">B</span><span class="o">(</span><span class="err">1</span><span class="o">)])</span> <span class="o">+</span> <span class="n">L</span><span class="o">([</span><span class="kt">A</span><span class="o">(</span><span class="err">1</span><span class="o">)</span> <span class="kt">B</span><span class="o">(</span><span class="err">0</span><span class="o">)])</span> <span class="o">-</span> <span class="n">L</span><span class="o">([</span><span class="kt">A</span><span class="o">(</span><span class="err">1</span><span class="o">)</span> <span class="kt">B</span><span class="o">(</span><span class="err">1</span><span class="o">)])),</span><span class="nc">Quotient</span><span class="o">([</span><span class="err">1</span>,<span class="kt">A</span>,<span class="kt">B</span><span class="o">]),</span><span class="nc">Grp</span><span class="o">(</span><span class="nc">GenPerm</span><span class="o">(</span><span class="nc">Perm</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">3</span><span class="o">)(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">),(</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">)),</span> <span class="nc">GenPerm</span><span class="o">(</span><span class="nc">Perm</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">),(</span><span class="mi">0</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">))))</span>
</code></pre></div></div>

<p>Note that this CHSH example includes all relabelings of parties/inputs/outputs.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="nc">CHSH</span><span class="o">.</span><span class="n">swapParties</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.free.Generator</span><span class="o">[</span><span class="kt">net.alasc.symdpoly.examples.CHSH.Free.</span><span class="k">type</span><span class="o">]</span> <span class="k">=</span> <span class="n">swapParties</span><span class="k">:</span> <span class="o">{</span><span class="kt">A</span><span class="o">(</span><span class="err">0</span><span class="o">)</span> <span class="kt">-&gt;</span> <span class="kt">B</span><span class="o">(</span><span class="err">0</span><span class="o">),</span> <span class="kt">A</span><span class="o">(</span><span class="err">1</span><span class="o">)</span> <span class="kt">-&gt;</span> <span class="kt">B</span><span class="o">(</span><span class="err">1</span><span class="o">),</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)}</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">CHSH</span><span class="o">.</span><span class="n">inputSwapA</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.free.Generator</span><span class="o">[</span><span class="kt">net.alasc.symdpoly.examples.CHSH.Free.</span><span class="k">type</span><span class="o">]</span> <span class="k">=</span> <span class="n">inputSwapA</span><span class="k">:</span> <span class="o">{</span><span class="kt">A</span><span class="o">(</span><span class="err">0</span><span class="o">)</span> <span class="kt">-&gt;</span> <span class="kt">A</span><span class="o">(</span><span class="err">1</span><span class="o">),</span> <span class="kt">A</span><span class="o">(</span><span class="err">1</span><span class="o">)</span> <span class="kt">-&gt;</span> <span class="kt">A</span><span class="o">(</span><span class="err">0</span><span class="o">)}</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nc">CHSH</span><span class="o">.</span><span class="n">outputSwapA0</span>
<span class="n">res2</span><span class="k">:</span> <span class="kt">net.alasc.symdpoly.free.Generator</span><span class="o">[</span><span class="kt">net.alasc.symdpoly.examples.CHSH.Free.</span><span class="k">type</span><span class="o">]</span> <span class="k">=</span> <span class="n">outputSwapA0</span><span class="k">:</span> <span class="o">{</span><span class="kt">A</span><span class="o">(</span><span class="err">0</span><span class="o">)</span> <span class="kt">-&gt;</span> <span class="kt">-</span> <span class="kt">A</span><span class="o">(</span><span class="err">0</span><span class="o">)}</span>

<span class="kt">scala&gt;</span> <span class="kt">CHSH.ambientGroup.order</span>
<span class="n">res3</span><span class="k">:</span> <span class="kt">spire.math.SafeLong</span> <span class="o">=</span> <span class="mi">128</span>
</code></pre></div></div>

<h2 id="exploring-the-monomial-matrix-structure">Exploring the monomial matrix structure</h2>

<p>The <code class="highlighter-rouge">momentMatrixDescription</code> method returns a user-friendly text description of the moment matrix.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">relaxation</span><span class="o">.</span><span class="n">momentMatrixDescription</span>
<span class="n">res4</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span>
<span class="s">"  [1]          [0]            [0]          [0]            [0]
  [0]          [1]            [0]  [A(0) B(0)]    [A(0) B(0)]
  [0]          [0]            [1]  [A(0) B(0)]  [- A(0) B(0)]
  [0]  [A(0) B(0)]    [A(0) B(0)]          [1]            [0]
  [0]  [A(0) B(0)]  [- A(0) B(0)]          [0]            [1]"</span>
</code></pre></div></div>

<p>Note that the monomials are included into brackets, as they represent equivalence classes of monomials in the quotient algebra.</p>

<p>This description works only for smaller moment matrices. We now see how to get more compact descriptions.</p>

<p>First, the method <code class="highlighter-rouge">canonicalMonomials</code> returns a list of the monomials present. The first element of each row is the monomial index, followed by the canonical representative of that monomial under the symmetry group and the quotient algebra rewriting rules. Then, after the colon <code class="highlighter-rouge">:</code>, the orbit of (quotient) monomials under the symmetry group. The symmetry group can flip the sign of monomials, thus some elements on the right of <code class="highlighter-rouge">:</code> can be preceded by a phase.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">relaxation</span><span class="o">.</span><span class="n">canonicalMonomialsDescription</span>
<span class="n">res5</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span>
<span class="mi">0</span> <span class="mi">1</span><span class="k">:</span> <span class="err">1</span>
<span class="err">1</span> <span class="kt">A</span><span class="o">(</span><span class="err">0</span><span class="o">)</span> <span class="kt">B</span><span class="o">(</span><span class="err">0</span><span class="o">)</span><span class="kt">:</span> <span class="kt">A</span><span class="o">(</span><span class="err">0</span><span class="o">)</span> <span class="kt">B</span><span class="o">(</span><span class="err">0</span><span class="o">),</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div></div>
<p>The moment matrix is then described using that list. The first line provides the size of the moment matrix, following by the number of unique monomials.
Then, the matrix of monomials indices.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">relaxation</span><span class="o">.</span><span class="n">momentIndexMatrixDescription</span>
<span class="n">res6</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span>
<span class="mi">5</span> <span class="mi">2</span>
<span class="mi">0</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-</span><span class="mi">1</span>
<span class="o">-</span><span class="mi">1</span> <span class="mi">0</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="o">-</span><span class="mi">1</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="o">-</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span> <span class="o">-</span><span class="mi">1</span>
<span class="o">-</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">0</span>
</code></pre></div></div>
<p>Note that monomial indexing is <code class="highlighter-rouge">0</code>-based, and that <code class="highlighter-rouge">-1</code> represents a cell of the moment matrix always equal to <code class="highlighter-rouge">0</code>.
Those monomials can acquire a phase, either during rewriting or due to the action of the symmetry group. Phases are provided by another matrix:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">relaxation</span><span class="o">.</span><span class="n">phaseMatrixDescription</span>
<span class="n">res7</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span>
<span class="mi">5</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="o">-</span><span class="mi">1</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="mi">1</span> <span class="mi">1</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
</code></pre></div></div>
<p>Finally, a description of the symmetry group (subgroup of the ambient group) used to formulate the problem can be obtained.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">relaxation</span><span class="o">.</span><span class="n">symmetryGroupDescription</span>
<span class="n">res8</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span>
<span class="nc">Number</span> <span class="n">of</span> <span class="n">generators</span><span class="k">:</span> <span class="err">2</span>
<span class="kt">Group</span> <span class="kt">order:</span> <span class="err">16</span>
<span class="o">{</span><span class="kt">A</span><span class="o">(</span><span class="err">0</span><span class="o">)</span> <span class="kt">-&gt;</span> <span class="kt">B</span><span class="o">(</span><span class="err">1</span><span class="o">),</span> <span class="kt">A</span><span class="o">(</span><span class="err">1</span><span class="o">)</span> <span class="kt">-&gt;</span> <span class="kt">-</span> <span class="kt">B</span><span class="o">(</span><span class="err">0</span><span class="o">),</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)}</span>
<span class="o">{</span><span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">-</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">-</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">B</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">-</span> <span class="n">A</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">B</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">A</span><span class="o">(</span><span class="mi">1</span><span class="o">)}</span>
</code></pre></div></div>

<h2 id="writing-to-files">Writing to files</h2>

<p>To write any of the above to a file, use:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="n">scala</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">nsc</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="nc">File</span><span class="o">(</span><span class="s">"matrix.txt"</span><span class="o">).</span><span class="n">writeAll</span><span class="o">(</span><span class="n">relaxation</span><span class="o">.</span><span class="n">momentMatrixDescription</span><span class="o">)</span>
</code></pre></div></div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/symdpoly/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script>((window.gitter = {}).chat = {}).options = {
room: 'denisrosset/symdpoly'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/symdpoly/js/main.js"></script></body></html>